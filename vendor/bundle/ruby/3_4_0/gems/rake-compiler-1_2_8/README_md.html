<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>README - RDoc Documentation</title>

  <meta name="keywords" content="ruby,documentation,README">
  <meta name="description" content="README: What is rake-compiler? rake-compiler is first and foremost a productivity tool for Ruby developers. Its goal is to make the busy developer&#39;s life eas">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../../../../";
  var index_rel_prefix = "../../../../../../";
</script>

<script src="../../../../../../js/navigation.js" defer></script>
<script src="../../../../../../js/search.js" defer></script>
<script src="../../../../../../js/search_index.js" defer></script>
<script src="../../../../../../js/searcher.js" defer></script>
<script src="../../../../../../js/darkfish.js" defer></script>

<link href="../../../../../../css/fonts.css" rel="stylesheet">
<link href="../../../../../../css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="file">
<div id="navigation-toggle" role="button" tabindex="0" aria-label="Toggle sidebar" aria-expanded="true" aria-controls="navigation">
  <span aria-hidden="true">&#9776;</span>
</div>


<nav id="navigation" role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search (/) for a class, method, ..." spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>



  <ul class="link-list" role="directory">
              <li>
            <details open>
              <summary>      <a href="#label-What+is+rake-compiler-3F">What is rake-compiler?</a>
</summary>
              <ul class="link-list" role="directory">
                          <li>      <a href="#label-Feature+Overview">Feature Overview</a>
          <li>      <a href="#label-OK-2C+I-27m+sold-21+Show+me+how+to+install+it-21">OK, I’m sold! Show me how to install it!</a>
          <li>
            <details open>
              <summary>      <a href="#label-That-27s+easy.+How+do+I+use+it-3F">That’s easy. How do I use it?</a>
</summary>
              <ul class="link-list" role="directory">
                          <li>      <a href="#label-Using+a+standardized+project+structure">Using a standardized project structure</a>
          <li>      <a href="#label-Adding+the+code+to+enable+rake-compiler">Adding the code to enable rake-compiler</a>
          <li>      <a href="#label-The+simple+process">The simple process</a>
          <li>      <a href="#label-Generating+native+RubyGems">Generating native RubyGems</a>
          <li>      <a href="#label-Great-2C+but+can+I+use+a+non-standard+project+structure-3F">Great, but can I use a non-standard project structure?</a>
          <li>      <a href="#label-Show+me+all+of+the+supported+configuration+options">Show me all of the supported configuration options</a>

              </ul>
            </details>
          </li>
          <li>
            <details open>
              <summary>      <a href="#label-Cross+compilation+-+the+future+is+now.">Cross compilation - the future is now.</a>
</summary>
              <ul class="link-list" role="directory">
                          <li>
            <details open>
              <summary>      <a href="#label-How+do+I+do+this+from+Linux+or+OSX-3F">How do I do this from Linux or OSX?</a>
</summary>
              <ul class="link-list" role="directory">
                          <li>      <a href="#label-The+Easy+Way">The Easy Way</a>
          <li>      <a href="#label-The+Manual+Way">The Manual Way</a>
          <li>      <a href="#label-I-27ve+got+my+tool-chain+installed-2C+now+what-3F">I’ve got my tool-chain installed, now what?</a>
          <li>      <a href="#label-OK-2C+let-27s+cross+compile+some+gems-21">OK, let’s cross compile some gems!</a>
          <li>      <a href="#label-Warning-2C+magician+about+to+do+some+tricks-2C+don-27t+blink-21">Warning, magician about to do some tricks, don’t blink!</a>
          <li>      <a href="#label-But+wait-2C+there-27s+more">But wait, there’s more</a>

              </ul>
            </details>
          </li>

              </ul>
            </details>
          </li>
          <li>      <a href="#label-What+are+you+talking+about-3F+-28Give+me+examples-29">What are you talking about? (Give me examples)</a>
          <li>      <a href="#label-Future">Future</a>
          <li>      <a href="#label-Disclaimer">Disclaimer</a>

              </ul>
            </details>
          </li>

  </ul>
</div>

  
<div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
    <li><a href="../../../../../../CHANGELOG_md.html">CHANGELOG</a>
    <li><a href="../../../../../../CONTRIBUTION_md.html">CONTRIBUTION</a>
    <li><a href="../../../../../../Dockerfile.html">Dockerfile</a>
    <li><a href="../../../../../../Gemfile.html">Gemfile</a>
    <li><a href="../../../../../../Gemfile_lock.html">Gemfile.lock</a>
    <li><a href="../../../../../../LICENSE.html">LICENSE</a>
    <li><a href="../../../../../../README_md.html">README</a>
    <li><a href="../../../../../../Rakefile.html">Rakefile</a>
    <li><a href="../../../../../../bin/setup.html">setup</a>
    <li><a href="../../../../../../getduckdb_sh.html">getduckdb.sh</a>
    <li><details open><summary>vendor</summary>
    <ul class="link-list">
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/bin/stackprof-flamegraph_pl.html">stackprof-flamegraph.pl</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/bin/stackprof-gprof2dot_py.html">stackprof-gprof2dot.py</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/extensions/x86_64-linux/3_4_0/bigdecimal-3_1_8/gem_build_complete.html">gem.build_complete</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/extensions/x86_64-linux/3_4_0/bigdecimal-3_1_8/gem_make_out.html">gem_make.out</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/extensions/x86_64-linux/3_4_0/bigdecimal-3_1_8/mkmf_log.html">mkmf.log</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/extensions/x86_64-linux/3_4_0/racc-1_8_1/gem_build_complete.html">gem.build_complete</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/extensions/x86_64-linux/3_4_0/racc-1_8_1/gem_make_out.html">gem_make.out</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/extensions/x86_64-linux/3_4_0/stackprof-0_2_26/gem_build_complete.html">gem.build_complete</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/extensions/x86_64-linux/3_4_0/stackprof-0_2_26/gem_make_out.html">gem_make.out</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/extensions/x86_64-linux/3_4_0/stackprof-0_2_26/mkmf_log.html">mkmf.log</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/benchmark-ips-2_14_0/History_md.html">History</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/benchmark-ips-2_14_0/LICENSE.html">LICENSE</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/benchmark-ips-2_14_0/README_md.html">README</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/bigdecimal-3_1_8/LICENSE.html">LICENSE</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/bigdecimal-3_1_8/ext/bigdecimal/Makefile.html">Makefile</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/minitest-5_25_2/History_rdoc.html">History</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/minitest-5_25_2/Manifest_txt.html">Manifest</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/minitest-5_25_2/README_rdoc.html">README</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/minitest-5_25_2/Rakefile.html">Rakefile</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/nokogiri-1_18_0-x86_64-linux-gnu/Gemfile.html">Gemfile</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/nokogiri-1_18_0-x86_64-linux-gnu/LICENSE-DEPENDENCIES_md.html">LICENSE-DEPENDENCIES</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/nokogiri-1_18_0-x86_64-linux-gnu/LICENSE_md.html">LICENSE</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/nokogiri-1_18_0-x86_64-linux-gnu/README_md.html">README</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/nokogiri-1_18_0-x86_64-linux-gnu/ext/nokogiri/depend.html">depend</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/nokogiri-1_18_0-x86_64-linux-gnu/gumbo-parser/CHANGES_md.html">CHANGES</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/nokogiri-1_18_0-x86_64-linux-gnu/gumbo-parser/Makefile.html">Makefile</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/nokogiri-1_18_0-x86_64-linux-gnu/gumbo-parser/THANKS.html">THANKS</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/nokogiri-1_18_0-x86_64-linux-gnu/lib/nokogiri/css/tokenizer_rex.html">tokenizer.rex</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/racc-1_8_1/BSDL.html">BSDL</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/racc-1_8_1/COPYING.html">COPYING</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/racc-1_8_1/ChangeLog.html">ChangeLog</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/racc-1_8_1/README_ja_rdoc.html">README.ja</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/racc-1_8_1/README_rdoc.html">README</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/racc-1_8_1/TODO.html">TODO</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/racc-1_8_1/doc/en/grammar_en_rdoc.html">grammar.en</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/racc-1_8_1/doc/en/grammar2_en_rdoc.html">grammar2.en</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/racc-1_8_1/doc/ja/command_ja_html.html">command.ja.html</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/racc-1_8_1/doc/ja/debug_ja_rdoc.html">debug.ja</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/racc-1_8_1/doc/ja/grammar_ja_rdoc.html">grammar.ja</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/racc-1_8_1/doc/ja/index_ja_html.html">index.ja.html</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/racc-1_8_1/doc/ja/parser_ja_rdoc.html">parser.ja</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/racc-1_8_1/doc/ja/usage_ja_html.html">usage.ja.html</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/racc-1_8_1/ext/racc/cparse/Makefile.html">Makefile</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-13_2_1/History_rdoc.html">History</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-13_2_1/MIT-LICENSE.html">MIT-LICENSE</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-13_2_1/README_rdoc.html">README</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-13_2_1/doc/command_line_usage_rdoc.html">command_line_usage</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-13_2_1/doc/example/Rakefile1.html">Rakefile1</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-13_2_1/doc/example/Rakefile2.html">Rakefile2</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-13_2_1/doc/glossary_rdoc.html">glossary</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-13_2_1/doc/proto_rake_rdoc.html">proto_rake</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-13_2_1/doc/rake_1.html">rake.1</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-13_2_1/doc/rakefile_rdoc.html">rakefile</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-13_2_1/doc/rational_rdoc.html">rational</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/Gemfile.html">Gemfile</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/History_md.html">History</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/LICENSE_txt.html">LICENSE</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/README_md.html">README</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/Rakefile.html">Rakefile</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/features/compile_feature.html">compile.feature</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/features/cross-compile_feature.html">cross-compile.feature</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/features/cross-package-multi_feature.html">cross-package-multi.feature</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/features/cross-package_feature.html">cross-package.feature</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/features/java-compile_feature.html">java-compile.feature</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/features/java-no-native-compile_feature.html">java-no-native-compile.feature</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/features/java-package_feature.html">java-package.feature</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/features/package_feature.html">package.feature</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/tasks/bin/cross-ruby_rake.html">cross-ruby.rake</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/tasks/bootstrap_rake.html">bootstrap.rake</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/tasks/common_rake.html">common.rake</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/tasks/cucumber_rake.html">cucumber.rake</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/tasks/gem_rake.html">gem.rake</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/rake-compiler-1_2_8/tasks/rspec_rake.html">rspec.rake</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/ruby_memcheck-3_0_0/Gemfile.html">Gemfile</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/ruby_memcheck-3_0_0/Gemfile_lock.html">Gemfile.lock</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/ruby_memcheck-3_0_0/LICENSE_txt.html">LICENSE</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/ruby_memcheck-3_0_0/README_md.html">README</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/ruby_memcheck-3_0_0/Rakefile.html">Rakefile</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/ruby_memcheck-3_0_0/suppressions/ruby_supp.html">ruby.supp</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/stackprof-0_2_26/CHANGELOG_md.html">CHANGELOG</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/stackprof-0_2_26/Gemfile.html">Gemfile</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/stackprof-0_2_26/LICENSE.html">LICENSE</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/stackprof-0_2_26/README_md.html">README</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/stackprof-0_2_26/Rakefile.html">Rakefile</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/stackprof-0_2_26/bin/stackprof-flamegraph_pl.html">stackprof-flamegraph.pl</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/stackprof-0_2_26/bin/stackprof-gprof2dot_py.html">stackprof-gprof2dot.py</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/stackprof-0_2_26/ext/stackprof/Makefile.html">Makefile</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/stackprof-0_2_26/lib/stackprof/flamegraph/flamegraph_js.html">flamegraph.js</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/stackprof-0_2_26/lib/stackprof/flamegraph/viewer_html.html">viewer.html</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/stackprof-0_2_26/vendor/FlameGraph/README.html">README</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/stackprof-0_2_26/vendor/FlameGraph/flamegraph_pl.html">flamegraph.pl</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/stackprof-0_2_26/vendor/gprof2dot/gprof2dot_py.html">gprof2dot.py</a>
      <li><a href="../../../../../../vendor/bundle/ruby/3_4_0/gems/stackprof-0_2_26/vendor/gprof2dot/hotshotmain_py.html">hotshotmain.py</a>
    </ul></details>
  </ul>
</div>


  <footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.10.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

</nav>

<main role="main" aria-label="Page vendor/bundle/ruby/3.4.0/gems/rake-compiler-1.2.8/README.md">

<h1 id="label-What+is+rake-compiler-3F">What is rake-compiler?<span><a href="#label-What+is+rake-compiler-3F">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>rake-compiler is first and foremost a productivity tool for Ruby developers. Its goal is to make the busy developer’s life easier by simplifying the building and packaging of Ruby extensions by simplifying code and reducing duplication.</p>

<p>It follows <strong>convention over configuration</strong> by advocating a standardized build and package structure for both C and Java based RubyGems.</p>

<p>rake-compiler is the result of many hard-won experiences dealing with several diverse RubyGems that provided native extensions for different platforms and different user configurations in different ways. Details such as differences in code portability, differences in code clarity, and differences in project directory structure often made it very difficult for newcomers to those RubyGems.</p>

<p>From these challenges, rake-compiler was born with the single-minded goal of making the busy RubyGem developer’s life much less difficult.</p>

<h2 id="label-Feature+Overview">Feature Overview<span><a href="#label-Feature+Overview">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Some of the benefits rake-compiler provides include:</p>
<ul><li>
<p>No custom rake tasks required. Less code duplication and errors.</p>
</li><li>
<p>Painlessly build extensions on different platforms (Linux, OSX and Windows).</p>
</li><li>
<p>Painlessly build extensions for different Ruby implementations (JRuby, Rubinius and MRI).</p>
</li><li>
<p>Allow multiple extensions to be compiled inside the same gem.</p>
</li><li>
<p>Painlessly build "fat" native gems for Windows users (from Linux or OSX).</p>
</li><li>
<p>Mimics RubyGems standard installation process, helping as a test environment.</p>
</li><li>
<p>Simplifies cross platform extension compilation (targeting Windows from Linux).</p>
</li></ul>

<h2 id="label-OK-2C+I-27m+sold-21+Show+me+how+to+install+it-21">OK, I’m sold! Show me how to install it!<span><a href="#label-OK-2C+I-27m+sold-21+Show+me+how+to+install+it-21">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Simple:</p>

<pre>$ gem install rake-compiler</pre>

<h2 id="label-That-27s+easy.+How+do+I+use+it-3F">That’s easy. How do I use it?<span><a href="#label-That-27s+easy.+How+do+I+use+it-3F">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Now that you have installed rake-compiler, it’s time to give your project a standardized structure.</p>

<h3 id="label-Using+a+standardized+project+structure">Using a standardized project structure<span><a href="#label-Using+a+standardized+project+structure">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Let’s say you want to compile an extension called ‘hello_world’. Organizing your project’s code tree in the following way will help rake-compiler do its job:</p>

<pre>|-- ext
|   `-- hello_world
|       |-- extconf.rb
|       |-- HelloWorldService.java
|       `-- hello_world.c
|-- lib
`-- Rakefile</pre>

<p>TIP: Having a consistent project directory structure will help developers and newcomers find and understand your code, making it easier for them to contribute back to your project.</p>

<h3 id="label-Adding+the+code+to+enable+rake-compiler">Adding the code to enable rake-compiler<span><a href="#label-Adding+the+code+to+enable+rake-compiler">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Now the fun part. It’s time to introduce the code to your projects <a href="../../../../../../Rakefile.html">Rakefile</a> to tell it to use rake-compiler to build your extension:</p>

<pre class="ruby"><span class="ruby-comment"># File: extconf.rb</span>

<span class="ruby-comment"># these lines must exist already</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;mkmf&#39;</span>
<span class="ruby-identifier">create_makefile</span>(<span class="ruby-string">&#39;hello_world&#39;</span>)

<span class="ruby-comment"># File: Rakefile</span>

<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rake/extensiontask&#39;</span>

<span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">ExtensionTask</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;hello_world&#39;</span>)
</pre>

<p>That’s it? Yes, that’s it! No other lines of code are needed for rake-compiler to work its magic.</p>

<p>Though, you need to make sure the parameter to <code>create_makefile</code> and <code>ExtensionTask.new</code> are the same or rake-compiler will not mimic the RubyGems standard install process. You can override this standard behaviour if needed, see the instructions for “non-standard project structure” below for details.</p>

<p>If you want to do the same for a JRuby extension written in Java, it’s just as easy:</p>

<pre class="ruby"><span class="ruby-comment"># File: Rakefile</span>

<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rake/javaextensiontask&#39;</span>

<span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">JavaExtensionTask</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;hello_world&#39;</span>)
</pre>

<h3 id="label-The+simple+process">The simple process<span><a href="#label-The+simple+process">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Those <strong>two</strong> simple lines of code automatically added the Rake tasks needed to build your ‘hello_world’ extension. For example, checking the Rake tasks on MRI Ruby 1.8.x/1.9 returns something similar to:</p>

<pre>$ rake -T
(in /home/user/my_extension)
rake compile                # Compile the extension(s)
rake compile:hello_world    # Compile just the hello_world extension</pre>

<p>Simply calling <code>compile</code> like</p>

<pre>$ rake compile</pre>

<p>performs the entire compile and build process for you and places the resulting extension inside the <code>lib</code> directory of your project.</p>

<p>To pass <code>dir_config</code> options to the compilation, add to the command line:</p>

<pre>$ rake compile -- --with-foo-[dir|lib|bin|...]=/path/to/foo</pre>

<p>NOTE: Please be aware that building C extensions requires the proper development environment for your Platform, including libraries, headers and build tools. Check your distro / vendor documentation on how to install these development resources.</p>

<p>NOTE: Building Java extensions requires the <code>javac</code>, part of the Java Development Kit (JDK). This should be included by default on Mac OS X, and downloadable from <a href="http://java.sun.com">java.sun.com</a> for other operating systems.</p>

<h3 id="label-Generating+native+RubyGems">Generating native RubyGems<span><a href="#label-Generating+native+RubyGems">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><a href="../../../../../../A.html"><code>A</code></a> common usage scenario for rake-compiler is generating native gems that bundle your extensions. As mentioned above, if you have your development environment configured correctly, the following examples work even when building native gems on Windows systems.</p>

<p>Creating native gems is really easy with rake-compiler’s <a href="../../../../../../Rake/ExtensionTask.html"><code>Rake::ExtensionTask</code></a>:</p>

<pre class="ruby"><span class="ruby-comment"># somewhere in your Rakefile, define your gem spec</span>
<span class="ruby-identifier">spec</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">s</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;my_gem&quot;</span>
  <span class="ruby-identifier">s</span>.<span class="ruby-identifier">platform</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Platform</span><span class="ruby-operator">::</span><span class="ruby-constant">RUBY</span>
  <span class="ruby-identifier">s</span>.<span class="ruby-identifier">extensions</span> = <span class="ruby-constant">FileList</span>[<span class="ruby-string">&quot;ext/**/extconf.rb&quot;</span>]
<span class="ruby-keyword">end</span>

<span class="ruby-comment"># add your default gem packing task</span>
<span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">PackageTask</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">spec</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pkg</span><span class="ruby-operator">|</span>
<span class="ruby-keyword">end</span>

<span class="ruby-comment"># feed the ExtensionTask with your spec</span>
<span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">ExtensionTask</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;hello_world&#39;</span>, <span class="ruby-identifier">spec</span>)
</pre>

<p>As expected, you can still build your pure-ruby gem in the usual way (standard output) by running:</p>

<pre>$ rake gem
(in /projects/oss/my_gem.git)
mkdir -p pkg
  Successfully built RubyGem
  Name: my_gem
  Version: 0.1.0
  File: my_gem-0.1.0.gem
mv my_gem-0.1.0.gem pkg/my_gem-0.1.0.gem</pre>

<p>Plus, rake-compiler tasks give you the extra functionality needed to build native gems by running:</p>

<pre># rake native gem
(... compilation output ...)
mkdir -p pkg
  Successfully built RubyGem
  Name: my_gem
  Version: 0.1.0
  File: my_gem-0.1.0.gem
mv my_gem-0.1.0.gem pkg/my_gem-0.1.0.gem
  Successfully built RubyGem
  Name: my_gem
  Version: 0.1.0
  File: my_gem-0.1.0-x86-mingw32.gem
mv my_gem-0.1.0-x86-mingw32.gem pkg/my_gem-0.1.0-x86-mingw32.gem</pre>

<p>Did you notice that you get two gems for the price of one? How’s that for a time saver?</p>

<p>Similarly, it’s just as easy to do the same thing for JRuby extensions:</p>

<pre># rake java gem
(... compilation output ...)
mkdir -p pkg
  Successfully built RubyGem
  Name: my_gem
  Version: 0.1.0
  File: my_gem-0.1.0.gem
mv my_gem-0.1.0.gem pkg/my_gem-0.1.0.gem
  Successfully built RubyGem
  Name: my_gem
  Version: 0.1.0
  File: my_gem-0.1.0-java.gem
mv my_gem-0.1.0-java.gem pkg/my_gem-0.1.0-java.gem</pre>

<h3 id="label-Great-2C+but+can+I+use+a+non-standard+project+structure-3F">Great, but can I use a non-standard project structure?<span><a href="#label-Great-2C+but+can+I+use+a+non-standard+project+structure-3F">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Yes you can! While the conventional project structure is recommended, you may want, or need, to tweak those conventions. Rake-compiler allows you to customize several settings for <a href="../../../../../../Rake/ExtensionTask.html"><code>Rake::ExtensionTask</code></a>:</p>

<pre class="ruby"><span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">ExtensionTask</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ext</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&#39;hello_world&#39;</span>                <span class="ruby-comment"># indicate the name of the extension.</span>
  <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">ext_dir</span> = <span class="ruby-string">&#39;ext/weird_world&#39;</span>         <span class="ruby-comment"># search for &#39;hello_world&#39; inside it.</span>
  <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">lib_dir</span> = <span class="ruby-string">&#39;lib/my_lib&#39;</span>              <span class="ruby-comment"># put binaries into this folder.</span>
  <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">config_script</span> = <span class="ruby-string">&#39;custom_extconf.rb&#39;</span> <span class="ruby-comment"># use instead of the default &#39;extconf.rb&#39;.</span>
  <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">tmp_dir</span> = <span class="ruby-string">&#39;tmp&#39;</span>                     <span class="ruby-comment"># temporary folder used during compilation.</span>
  <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">source_pattern</span> = <span class="ruby-string">&quot;*.{c,cpp}&quot;</span>        <span class="ruby-comment"># monitor file changes to allow simple rebuild.</span>
  <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">config_options</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;--with-foo&#39;</span>      <span class="ruby-comment"># supply additional options to configure script.</span>
  <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">gem_spec</span> = <span class="ruby-identifier">spec</span>                     <span class="ruby-comment"># optionally indicate which gem specification</span>
                                          <span class="ruby-comment"># will be used.</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-Show+me+all+of+the+supported+configuration+options">Show me all of the supported configuration options<span><a href="#label-Show+me+all+of+the+supported+configuration+options">&para;</a> <a href="#top">&uarr;</a></span></h3>

<table role="table">
<thead>
<tr>
<th>Option</th>
<th>Supported By</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>Both</td>
<td>Required. Give the target binary a name.</td>
</tr>
<tr>
<td>gem_spec</td>
<td>Both</td>
<td>[Optional] Indicate which gem specification will be used.</td>
</tr>
<tr>
<td>tmp_dir</td>
<td>Both</td>
<td>[Optional] Temporary folder used during compilation.</td>
</tr>
<tr>
<td>ext_dir</td>
<td>Both</td>
<td>[Optional] Where to search for ‘name`. Default: `ext/#{@name}`.</td>
</tr>
<tr>
<td>lib_dir</td>
<td>Both</td>
<td>[Optional] Put binaries into this folder. Default: ‘lib`.</td>
</tr>
<tr>
<td>config_options</td>
<td>Both</td>
<td>[Optional] Supply additional options to configure script.</td>
</tr>
<tr>
<td>source_pattern</td>
<td>Both</td>
<td>[Optional] Monitor file changes to allow simple rebuild. Default for CRuby: ‘*.{c,cc,cpp}`. Default for Java: `<strong>*/</strong>.java`.</td>
</tr>
<tr>
<td><em>extra_options</em></td>
<td>ExtensionTask (CRuby)</td>
<td>[Optional] _Any options you add to ARGV on the command line are passed on as complilation flags if they begin with a dash (-)._</td>
</tr>
<tr>
<td>config_script</td>
<td>ExtensionTask (CRuby)</td>
<td>[Optional] Specify alternate configuration file name when [Adding the code to enable rake-compiler](adding-the-code-to-enable-rake-compiler). Default: ‘extconf.rb`.</td>
</tr>
<tr>
<td>cross_compile</td>
<td>ExtensionTask (CRuby)</td>
<td>[Optional] See [Cross compilation - the future is now.](cross-compilation—the-future-is-now) Default: ‘false`.</td>
</tr>
<tr>
<td>cross_platform</td>
<td>ExtensionTask (CRuby)</td>
<td>[Optional] See [Cross compilation - the future is now.](cross-compilation—the-future-is-now) Default: ‘i386-mingw32`.</td>
</tr>
<tr>
<td>cross_config_options</td>
<td>ExtensionTask (CRuby)</td>
<td>[Optional] See [Cross compilation - the future is now.](cross-compilation—the-future-is-now) Default: ‘[]`.</td>
</tr>
<tr>
<td>no_native</td>
<td>ExtensionTask (CRuby)</td>
<td>[Optional] Set to true to prevent non-CRuby platforms from defining native tasks. Default: ‘false`.</td>
</tr>
<tr>
<td>config_includes</td>
<td>ExtensionTask (CRuby)</td>
<td>[Optional] Specify an <a href="../../../../../../Array.html"><code>Array</code></a> of paths to include as ‘-I…:…` includes during compilation. Default: `[’.‘]`.</td>
</tr>
<tr>
<td>classpath</td>
<td>JavaExtensionTask</td>
<td>[Optional] Specify additional classpath paths as an <a href="../../../../../../Array.html"><code>Array</code></a>. Default: _Uses the current CLASSPATH._</td>
</tr>
<tr>
<td>debug</td>
<td>JavaExtensionTask</td>
<td>[Optional] Whether to set the debug flag during compilation. Default: ‘false`.</td>
</tr>
<tr>
<td>source_version</td>
<td>JavaExtensionTask</td>
<td>[Optional] The JRE version that your source code requires to compile. Default: ‘1.6`.</td>
</tr>
<tr>
<td>target_version</td>
<td>JavaExtensionTask</td>
<td>[Optional] The oldest JRE version you want to support. Default: ‘1.6`.</td>
</tr>
<tr>
<td>encoding</td>
<td>JavaExtensionTask</td>
<td>[Optional] Specify an -encoding option to provide to the compiler. Default: ‘nil`.</td>
</tr>
<tr>
<td>lint_option</td>
<td>JavaExtensionTask</td>
<td>[Optional] Specify a ‘-Xlint:<em>_</em>` linting option such as `deprecation`, `all`, `none`, etc. (Run `javac -help -X` to see all available options.) <br> Default: _Simply `-Xlint` is run, which enables recommended warnings._</td>
</tr>
</tbody>
</table>

<h2 id="label-Cross+compilation+-+the+future+is+now.">Cross compilation - the future is now.<span><a href="#label-Cross+compilation+-+the+future+is+now.">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Rake-compiler also provides a standardized way to generate, from either Linux or OSX, extensions and gem binaries for your Windows users!</p>

<p>How can this be you say? Simple, rake-compiler’s cross compilation features take advantage of GCC’s host/target capabilities to build ‘target’ binaries on different ‘host’ OS’s.</p>

<h3 id="label-How+do+I+do+this+from+Linux+or+OSX-3F">How do I do this from Linux or OSX?<span><a href="#label-How+do+I+do+this+from+Linux+or+OSX-3F">&para;</a> <a href="#top">&uarr;</a></span></h3>

<h4 id="label-The+Easy+Way">The Easy Way<span><a href="#label-The+Easy+Way">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Use rake-compiler-dock, a gem that makes use of a virtual machine provisioned with all the necessary build tools. You can add a task to your <a href="../../../../../../Rakefile.html">Rakefile</a>, that cross-compiles and packages your gem into Windows fat binaries (with 1.8 to 2.2 and x86/x64 support). See <a href="https://github.com/rake-compiler/rake-compiler-dock">github.com/rake-compiler/rake-compiler-dock</a> for more information.</p>

<h4 id="label-The+Manual+Way">The Manual Way<span><a href="#label-The+Manual+Way">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>In addition to having the development tool chain installed (GCC), you also need to install your platform’s <code>mingw32</code> cross compilation package.</p>

<p>Installation depends upon your operating system/distribution. On Ubuntu and Debian host machines, a simple <code>apt-get install mingw32</code> will be enough.</p>

<p>On Arch, <code>mingw32</code> is installed by running <code>pacman -S mingw32-gcc</code></p>

<p>On OSX, we no longer recommend the usage of MacPorts <code>mingw32</code> package because it stagnated in GCC version 3.4.5.</p>

<p>Instead we recommend you download mingw-w64 automated build packages available at SourceForge:</p>

<p><a href="http://sourceforge.net/downloads/mingw-w64">sourceforge.net/downloads/mingw-w64</a>/</p>

<p>Browse into <em>Toolchains targetting Win32</em> and then <em>Automated Builds</em>.</p>

<p>Files will be ordered by recency, find the latest one with version 1.0 in it, like this one:</p>

<pre class="ruby"><span class="ruby-identifier">mingw</span><span class="ruby-operator">-</span><span class="ruby-identifier">w32</span><span class="ruby-value">-1.0</span><span class="ruby-operator">-</span><span class="ruby-identifier">bin_i686</span><span class="ruby-operator">-</span><span class="ruby-identifier">darwin_20110422</span>.<span class="ruby-identifier">tar</span>.<span class="ruby-identifier">bz2</span>
</pre>

<p>Download and extract. After that, make sure the bin directory is added to the PATH, eg:</p>

<pre>export PATH=~/mingw-w64/w32/bin:$PATH</pre>

<p>You can add this to your <code>.profile</code> to avoid the repitition.</p>

<h4 id="label-I-27ve+got+my+tool-chain+installed-2C+now+what-3F">I’ve got my tool-chain installed, now what?<span><a href="#label-I-27ve+got+my+tool-chain+installed-2C+now+what-3F">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>First, you need to build Ruby for Windows on your Linux or OSX system.</p>

<p>Relax, no need to freak out! Let rake-compiler do all the heavy lifting for you:</p>

<pre>rake-compiler cross-ruby</pre>

<p>And you’re done. It will automatically download, configure and compile the latest stable version of Ruby for Windows, and place it into your <code>~/.rake-compiler</code> directory.</p>

<p>This will create <code>~/.rake-compiler/config.yml</code> file so that rake-compiler knows where to find the <code>rbconfig.rb</code> file that matches the Ruby version on the Windows host system you’re cross-compiling for. An example:</p>

<pre># File: ~/.rake-compiler/config.yml

rbconfig-x86-mingw32-1.8.6: /path/to/ruby-1.8.6/rbconfig.rb
rbconfig-x86-mingw32-1.8.7: /path/to/ruby-1.8.7/rbconfig.rb
rbconfig-x86-mingw32-1.9.2: /path/to/ruby-1.9.2/rbconfig.rb</pre>

<p>If, instead, you want to build a different Ruby version than the default one, please supply a <code>VERSION</code>:</p>

<pre>rake-compiler cross-ruby VERSION=1.8.6-p114</pre>

<p>If you, like me, have multiple versions of MinGW packages installed, you can specify the HOST that will be used to cross compile Ruby:</p>

<pre>rake-compiler cross-ruby HOST=x86-mingw32 # (OSX mingw32 port)</pre>

<p>The host will vary depending on provider (mingw32 versus mingw-w64 projects). Please consult the documentation and website of the MinGW package provider before reporting any issues.</p>

<h4 id="label-OK-2C+let-27s+cross+compile+some+gems-21">OK, let’s cross compile some gems!<span><a href="#label-OK-2C+let-27s+cross+compile+some+gems-21">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Now, you only need specify a few additional options in your extension definition:</p>

<pre class="ruby"><span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">ExtensionTask</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;my_extension&#39;</span>, <span class="ruby-identifier">gem_spec</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ext</span><span class="ruby-operator">|</span>
  <span class="ruby-comment"># enable cross compilation (requires cross compile toolchain)</span>
  <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">cross_compile</span> = <span class="ruby-keyword">true</span>

  <span class="ruby-comment"># set a single platform or an array of platforms to target</span>
  <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">cross_platform</span> = [<span class="ruby-string">&#39;x86-mingw32&#39;</span>, <span class="ruby-string">&#39;x64-mingw32&#39;</span>]

  <span class="ruby-comment"># cross-compile options will be passed to extconf.rb for each</span>
  <span class="ruby-comment"># platform build, with platform-specific options in a hash.</span>
  <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">cross_config_options</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;--with-common-option&#39;</span>
  <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">cross_config_options</span> <span class="ruby-operator">&lt;&lt;</span> {
    <span class="ruby-string">&#39;x86-mswin32-60&#39;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;--with-some-option&#39;</span>,
    <span class="ruby-string">&#39;x64-mingw32&#39;</span>   <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;--enable-64bits&#39;</span>,
  }
  <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">cross_config_options</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;--with-final-option&#39;</span>

  <span class="ruby-comment"># perform alterations on the gemspec when cross compiling</span>
  <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">cross_compiling</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gem_spec</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># such as packaging a file that isn&#39;t specified in the gemspec</span>
    <span class="ruby-identifier">gem_spec</span>.<span class="ruby-identifier">files</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;lib/generated_file.rb&#39;</span>
    <span class="ruby-comment"># or adding a new installation message</span>
    <span class="ruby-identifier">gem_spec</span>.<span class="ruby-identifier">post_install_message</span> = <span class="ruby-string">&quot;You installed the binary version of this gem!&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>By default, cross compilation targets ‘i386-mingw32’ which is the default GCC platform for Ruby. MRI Ruby’s current official distribution uses <code>i386-mswin32-60</code>. The RubyInstaller distribution uses <code>x86-mingw32</code> and <code>x64-mingw32</code> for 32-bit and 64-bit Windows targets, respectively. Note that <code>i386</code> and <code>x86</code> are synonymous here; <code>x86</code> is preferred going forward.</p>

<p>The format for <code>cross_config_options</code> is an array of strings and hashes. Hashes will be fetched for each value of <code>cross_platform</code> as the build iterates, or ignored if there is no value for that platform. You can mix-and-match strings and hashes to get desired option ordering.</p>

<h4 id="label-Warning-2C+magician+about+to+do+some+tricks-2C+don-27t+blink-21">Warning, magician about to do some tricks, don’t blink!<span><a href="#label-Warning-2C+magician+about+to+do+some+tricks-2C+don-27t+blink-21">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Cross compiling is still very simple:</p>

<pre class="ruby"><span class="ruby-identifier">rake</span> <span class="ruby-identifier">cross</span> <span class="ruby-identifier">compile</span>
</pre>

<p>And now, building gems for your Windows users is just 6 more letters:</p>

<pre class="ruby"><span class="ruby-identifier">rake</span> <span class="ruby-identifier">cross</span> <span class="ruby-identifier">native</span> <span class="ruby-identifier">gem</span>
</pre>

<p>And you’re done, yeah.</p>

<h4 id="label-But+wait-2C+there-27s+more">But wait, there’s more<span><a href="#label-But+wait-2C+there-27s+more">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>You can specify which version of Ruby to build the extension against:</p>

<pre>rake cross compile RUBY_CC_VERSION=1.8.6</pre>

<p>For example, if you installed <code>1.9.2</code>, you can do:</p>

<pre>rake cross compile RUBY_CC_VERSION=1.9.2</pre>

<p>Even better, you can target multiple versions (ie. 1.8.6 and 1.9.2) in the same gem via:</p>

<pre>rake cross compile RUBY_CC_VERSION=1.8.6:1.9.2</pre>

<p>And better yet, you can bundle both binary extensions into one so-called “fat” gem via:</p>

<pre>rake cross native gem RUBY_CC_VERSION=1.8.6:1.9.2</pre>

<p>That will place binaries for both the 1.8 and 1.9 versions of your Ruby extensions inside your project’s <code>lib_dir</code> directory:</p>

<pre class="ruby"><span class="ruby-identifier">lib</span><span class="ruby-operator">/</span><span class="ruby-value">1.8</span><span class="ruby-operator">/</span><span class="ruby-identifier">my_extension</span>.<span class="ruby-identifier">so</span>
<span class="ruby-identifier">lib</span><span class="ruby-operator">/</span><span class="ruby-value">1.9</span><span class="ruby-operator">/</span><span class="ruby-identifier">my_extension</span>.<span class="ruby-identifier">so</span>
</pre>

<p>NOTE: building “fat” gems is currently only supported by rake-compiler when cross compiling from a Linux or OSX host. Patches are welcome if building “fat” gems from Windows hosts is desired, or natively for your platform :-)</p>

<p>Now it’s up to you to make your gem load the proper binary at runtime:</p>

<pre class="ruby"><span class="ruby-keyword">begin</span>
  <span class="ruby-constant">RUBY_VERSION</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/(\d+\.\d+)/</span>
  <span class="ruby-identifier">require</span> <span class="ruby-node">&quot;#{$1}/my_extension&quot;</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">LoadError</span>
  <span class="ruby-identifier">require</span> <span class="ruby-string">&quot;my_extension&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>The above technique will lookup first for 1.8 or 1.9 version of the extension and when not found, will look for the plain extension.</p>

<p>This approach catch the cases of provided fat binaries or gems compiled by the end user installing the gem. It has also been implemented successfully in several projects.</p>

<h2 id="label-What+are+you+talking+about-3F+-28Give+me+examples-29">What are you talking about? (Give me examples)<span><a href="#label-What+are+you+talking+about-3F+-28Give+me+examples-29">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>I know all the above sounds like a complete foreign language (it does even for me!). So, what if I show you some examples?</p>

<p>Check our wiki with links to the proper rake files used by many developers and projects and how they use rake-compiler.</p>

<p><a href="http://github.com/rake-compiler/rake-compiler/wiki/projects-using-rake-compiler">github.com/rake-compiler/rake-compiler/wiki/projects-using-rake-compiler</a></p>

<h2 id="label-Future">Future<span><a href="#label-Future">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>rake-compiler is a work in progress and we appreciate any and all feedback during the development of it! (and contributions too!)</p>

<p>You can find more information about rake-compiler:</p>
<ul><li>
<p>GitHub: <a href="https://github.com/rake-compiler/rake-compiler">github.com/rake-compiler/rake-compiler</a></p>
</li><li>
<p>Issues: <a href="https://github.com/rake-compiler/rake-compiler/issues">github.com/rake-compiler/rake-compiler/issues</a></p>
</li><li>
<p>Docs: <a href="http://rubydoc.info/gems/rake-compiler">rubydoc.info/gems/rake-compiler</a></p>
</li><li>
<p>Wiki: <a href="https://github.com/rake-compiler/rake-compiler/wiki">github.com/rake-compiler/rake-compiler/wiki</a></p>
</li></ul>

<h2 id="label-Disclaimer">Disclaimer<span><a href="#label-Disclaimer">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>If you have any trouble, don’t hesitate to contact the author. As always, I’m not going to say “Use at your own risk” because I don’t want this library to be risky.</p>

<p>If you trip on something, I’ll share the liability by repairing things as quickly as I can. Your responsibility is to report the inadequacies.</p>

</main>

